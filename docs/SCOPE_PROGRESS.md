# RAGベースAIコーチングbot - 開発進捗状況

## 1. 基本情報

- **ステータス**: MVP要件定義完了
- **完了タスク数**: 1/11
- **進捗率**: 9%
- **次のマイルストーン**: 環境構築 + システムRAG構築（Week 1）
- **最終更新日**: 2025-11-02

## 2. MVP開発スケジュール（4週間）

### Week 1: 環境構築 + システムRAG構築
- [ ] 外部サービスアカウント取得（Claude API、OpenAI API、Supabase）
- [ ] Difyローカルセットアップ（Docker Compose）
- [ ] Supabase pgvector設定
- [ ] 専門知識ファイル整理（200ファイル + 50時間分動画）
- [ ] システムRAGアップロード・ベクトル化

### Week 2: COM:PASS統合 + 初期テスト
- [ ] データエクスポートAPI実装（C-001）
- [ ] 初回データエクスポート → DifyユーザーRAGアップロード（5-10名分）
- [ ] 基本プロンプト作成
- [ ] ハイブリッド検索ワークフロー設定

### Week 3: チューニング + テスト運用開始
- [ ] プロンプト調整、応答品質確認
- [ ] テストクライアント招待、フィードバック収集
- [ ] 問題修正、ワークフロー改善

### Week 4: 本番移行準備
- [ ] DigitalOcean Dropletセットアップ、本番デプロイ
- [ ] 本番環境テスト、パフォーマンス確認
- [ ] ドキュメント整備、コーチ向けトレーニング
- [ ] 正式運用開始

## 3. 統合ページ管理表

### 3.1 Dify標準ページ（開発工数: 0時間）

| ID | ページ名 | ルート | 権限レベル | 統合機能 | 着手 | 完了 |
|----|---------|-------|----------|---------|------|------|
| D-001 | ログイン | `/login` | 公開 | 認証 | [ ] | [ ] |
| D-002 | AIチャット | `/chat` | クライアント | システムRAG + ユーザーRAG統合検索、会話履歴自動保存 | [ ] | [ ] |
| D-003 | 会話履歴 | `/logs` | クライアント | 自分の過去会話確認、セッション管理 | [ ] | [ ] |
| D-004 | 管理ダッシュボード | `/admin` | コーチ | システム統計、ナビゲーション | [ ] | [ ] |
| D-005 | ナレッジベース管理 | `/admin/datasets` | コーチ | システムRAG + ユーザーRAG構築、ファイルアップロード、ベクトル化 | [ ] | [ ] |
| D-006 | 会話履歴管理 | `/admin/logs` | コーチ | 全クライアント会話確認、危機フラグ確認 | [ ] | [ ] |
| D-007 | プロンプト編集 | `/admin/app/{id}/configuration` | コーチ | システムプロンプト調整、A/Bテスト | [ ] | [ ] |
| D-008 | ワークフロー編集 | `/admin/app/{id}/workflow` | コーチ | RAG検索フロー、危機検出フロー設定 | [ ] | [ ] |
| D-009 | ユーザー管理 | `/admin/users` | コーチ | クライアント追加・削除、トークン発行 | [ ] | [ ] |

### 3.2 COM:PASS側カスタム開発（開発工数: 4-6時間）

| ID | ページ名 | ルート | 権限レベル | 統合機能 | 着手 | 完了 |
|----|---------|-------|----------|---------|------|------|
| C-001 | データエクスポート | `/admin/export` | コーチ | ユーザーRAG用データ出力（目標、タスク、ログ、振り返り等）、Markdown形式生成 | [ ] | [ ] |

### 3.3 開発サマリー

| カテゴリ | ページ数 | 開発工数 | 備考 |
|---------|---------|---------|------|
| Dify標準ページ | 9 | 0時間 | 設定・調整のみ |
| COM:PASSカスタム開発 | 1 | 4-6時間 | エクスポートAPI実装 |
| **合計** | **10** | **4-6時間** | MVP最小構成 |

## 4. 実装の優先順位

### 🔴 最優先（Week 1）
- 外部サービスアカウント取得
- Difyローカル環境構築
- システムRAG構築（専門知識のベクトル化）

### 🟡 高優先（Week 2）
- C-001: データエクスポートAPI実装
- ユーザーRAG構築
- プロンプト + ワークフロー設定

### 🟢 中優先（Week 3-4）
- テスト運用、フィードバック収集
- 本番環境デプロイ

## 5. 技術的な注意事項

### Dify設定のポイント
- pgvector接続情報を正確に設定（Supabase）
- プロンプトキャッシング有効化（Claude API）
- チャンク設定: デフォルト500トークン、オーバーラップ50
- Embeddings: OpenAI text-embedding-3-small

### COM:PASS側の実装ポイント
- エクスポートデータ形式: Markdown
- 対象データ: 目標、タスク（直近50件）、ログ（直近30日）、振り返り、改善計画
- API: GET `/api/admin/export/{user_id}?start_date={YYYY-MM-DD}`

## 6. 完了基準

### MVP完了の定義
- [x] 要件定義書作成完了
- [x] UI/UX要件明確化（スマホ対応・PC対応）
- [ ] テストクライアント5名以上が週1回以上利用
- [ ] 応答時間3-5秒以内を90%以上達成
- [ ] システムRAG検索からの引用率80%以上
- [ ] クライアント満足度4.0以上（5段階評価）
- [ ] 1週間の安定稼働（エラー率5%未満）
- [ ] スマホでのチャット動作確認（iOS Safari、Android Chrome）

---

## 7. 更新履歴

```yaml
2025-11-02:
  - MVP要件定義書作成完了
  - 統合ページ管理表作成
  - CLAUDE.md作成
  - UI/UX要件追加（クライアント: スマホ必須、コーチ: PC想定）
```

---

**備考**: Dify完全採用により、通常数ヶ月かかるRAGチャットbot開発をMVP 4週間で完了可能。Dify標準UIがスマホ対応済みのため、追加開発不要。
