# 会話履歴ページE2Eテスト仕様書

生成日: 2025-11-02
対象ページ: /logs (D-003)
テスト環境: モック実装
作成者: E2Eテスト仕様書作成エージェント

## 概要
- **総テスト項目数**: 62項目
- **高優先度**: 25項目
- **中優先度**: 24項目
- **低優先度**: 13項目

## テスト項目一覧

| No | テストID | テスト項目 | 依存テストID | 機能分類 | テスト分類 | 優先度 | 確認内容 | テストデータ/手順 | 期待結果 | 実施日 | 結果 | 備考 |
|----|---------|----------|------------|---------|-----------|--------|---------|------------------|----------|--------|------|------|
| 1 | E2E-LOGS-001 | ページアクセス（認証済み・クライアント） | なし | 認証 | 正常系 | 高 | クライアントがアクセス可能 | client1@rag-base.local でログイン後、/logs へアクセス | 会話履歴ページが表示される | | | |
| 2 | E2E-LOGS-002 | ページアクセス（未認証） | なし | 認証 | セキュリティ | 高 | 未ログイン時のリダイレクト | ログアウト状態で /logs へアクセス | /login へリダイレクト | | | |
| 3 | E2E-LOGS-003 | ページアクセス（コーチ） | なし | 認証 | セキュリティ | 高 | コーチは直接アクセス不可 | coach@rag-base.local でログイン後、/logs へアクセス | アクセス拒否または管理画面へリダイレクト | | | |
| 4 | E2E-LOGS-004 | 初期表示：ローディング状態 | E2E-LOGS-001 | 表示 | 正常系 | 高 | ローディング中の表示確認 | ページアクセス直後 | CircularProgressが表示される | | | |
| 5 | E2E-LOGS-005 | 会話一覧取得成功 | E2E-LOGS-004 | データ取得 | 正常系 | 高 | 会話一覧が正常に表示 | モックAPI: 4件の会話データ返却 | 4件の会話が日付グループ別に表示される | | | |
| 6 | E2E-LOGS-006 | 会話一覧取得エラー | E2E-LOGS-004 | データ取得 | 異常系 | 高 | APIエラー時の表示 | モックAPIでエラーを発生 | エラーメッセージ「会話履歴の読み込みに失敗しました」が表示 | | | |
| 7 | E2E-LOGS-007 | 空の状態（会話0件） | E2E-LOGS-004 | 表示 | 正常系 | 高 | 会話が0件の場合の表示 | モックAPI: 空配列を返却 | 「会話履歴がありません」メッセージとアイコン、新規会話ボタンが表示 | | | |
| 8 | E2E-LOGS-008 | 日付グループ：今日 | E2E-LOGS-005 | 表示 | 正常系 | 高 | 本日の会話が「今日」グループに表示 | モックデータ: session-001（今日の会話） | 「今日」グループに1件表示 | | | |
| 9 | E2E-LOGS-009 | 日付グループ：昨日 | E2E-LOGS-005 | 表示 | 正常系 | 中 | 昨日の会話が「昨日」グループに表示 | モックデータ: session-002, session-003（昨日の会話） | 「昨日」グループに2件表示 | | | |
| 10 | E2E-LOGS-010 | 日付グループ：今週 | E2E-LOGS-005 | 表示 | 正常系 | 中 | 今週の会話が「今週」グループに表示 | モックデータ: session-004（3日前の会話） | 「今週」グループに1件表示 | | | |
| 11 | E2E-LOGS-011 | 日付グループ：それ以前 | E2E-LOGS-005 | 表示 | 正常系 | 中 | 1週間以上前の会話が「それ以前」グループに表示 | テストデータ追加: 2週間前の会話 | 「それ以前」グループに表示 | | | |
| 12 | E2E-LOGS-012 | 会話カードの基本情報表示 | E2E-LOGS-005 | 表示 | 正常系 | 高 | タイトル、プレビュー、メタ情報の表示 | session-001を確認 | タイトル「今週の目標について」、アイコン、プレビューテキスト、時刻「HH:MM」、メッセージ数「8メッセージ」が表示 | | | |
| 13 | E2E-LOGS-013 | アイコンの自動選択：目標系 | E2E-LOGS-005 | 表示 | 正常系 | 低 | タイトルに「目標」を含む会話のアイコン | session-001「今週の目標について」 | PsychologyIcon が表示 | | | |
| 14 | E2E-LOGS-014 | アイコンの自動選択：キャリア系 | E2E-LOGS-005 | 表示 | 正常系 | 低 | タイトルに「キャリア」を含む会話のアイコン | session-002「キャリアの方向性」 | AssignmentIcon が表示 | | | |
| 15 | E2E-LOGS-015 | アイコンの自動選択：デフォルト | E2E-LOGS-005 | 表示 | 正常系 | 低 | キーワードに該当しない会話のアイコン | session-003「ワークライフバランス」 | PsychologyIcon（デフォルト）が表示 | | | |
| 16 | E2E-LOGS-016 | 時刻フォーマット：今日 | E2E-LOGS-008 | 表示 | 正常系 | 中 | 今日の会話は時刻のみ表示 | 今日 14:30 に作成された会話 | 「14:30」形式で表示 | | | |
| 17 | E2E-LOGS-017 | 時刻フォーマット：昨日 | E2E-LOGS-009 | 表示 | 正常系 | 中 | 昨日の会話は時刻のみ表示 | 昨日 09:15 に作成された会話 | 「9:15」形式で表示 | | | |
| 18 | E2E-LOGS-018 | 時刻フォーマット：今週 | E2E-LOGS-010 | 表示 | 正常系 | 中 | 今週の会話は曜日+時刻表示 | 3日前（水曜日）16:00 に作成 | 「水曜日 16:00」形式で表示 | | | |
| 19 | E2E-LOGS-019 | 時刻フォーマット：それ以前 | E2E-LOGS-011 | 表示 | 正常系 | 中 | 1週間以上前は日付表示 | 2週間前（10/15）に作成 | 「10/15」形式で表示 | | | |
| 20 | E2E-LOGS-020 | 会話カードのホバー効果 | E2E-LOGS-005 | UI/UX | 正常系 | 低 | マウスホバー時の視覚効果 | 会話カードにマウスホバー | border色がprimary.mainに変化、boxShadow: 2、transform: translateY(-2px) | | | |
| 21 | E2E-LOGS-021 | 会話詳細を開く（クリック） | E2E-LOGS-005 | 遷移 | 正常系 | 高 | 会話カードクリックで詳細へ遷移 | session-001 のカードをクリック | /chat?session_id=session-001 へ遷移 | | | |
| 22 | E2E-LOGS-022 | 削除ボタンの表示 | E2E-LOGS-005 | 表示 | 正常系 | 高 | 削除ボタンが表示されている | 会話カードを確認 | 右上にDeleteOutlineIconのIconButtonが表示 | | | |
| 23 | E2E-LOGS-023 | 削除ボタンのホバー効果 | E2E-LOGS-022 | UI/UX | 正常系 | 低 | 削除ボタンのホバー時のスタイル | 削除ボタンにマウスホバー | 背景色: rgba(245, 101, 101, 0.1)、色: error.main | | | |
| 24 | E2E-LOGS-024 | 削除確認モーダルを開く | E2E-LOGS-022 | 操作 | 正常系 | 高 | 削除ボタンクリックでモーダル表示 | session-001の削除ボタンをクリック | 削除確認Dialogが表示、タイトル「会話を削除」、警告アイコン、メッセージが表示 | | | |
| 25 | E2E-LOGS-025 | 削除ボタンのイベント伝播防止 | E2E-LOGS-024 | 操作 | 正常系 | 中 | 削除ボタンクリック時、会話詳細へ遷移しない | 削除ボタンをクリック | モーダルのみ表示され、/chatへ遷移しない | | | |
| 26 | E2E-LOGS-026 | 削除確認モーダルを閉じる（キャンセル） | E2E-LOGS-024 | 操作 | 正常系 | 高 | キャンセルボタンでモーダル閉じる | モーダルの「キャンセル」ボタンをクリック | モーダルが閉じる、会話は削除されない | | | |
| 27 | E2E-LOGS-027 | 削除確認モーダルを閉じる（背景クリック） | E2E-LOGS-024 | 操作 | 正常系 | 中 | 背景クリックでモーダル閉じる | モーダルの背景をクリック | モーダルが閉じる、会話は削除されない | | | |
| 28 | E2E-LOGS-028 | 会話削除の実行 | E2E-LOGS-024 | 削除 | 正常系 | 高 | 削除ボタンで会話が削除される | モーダルの「削除する」ボタンをクリック | API呼び出し（DELETE /v1/conversations/session-001）、会話リストから削除、モーダルが閉じる | | | |
| 29 | E2E-LOGS-029 | 削除実行中の状態表示 | E2E-LOGS-028 | UI/UX | 正常系 | 中 | 削除中のボタンテキスト変化 | 削除実行中を確認 | ボタンテキストが「削除中...」、ボタンがdisabled状態 | | | |
| 30 | E2E-LOGS-030 | 削除後のUI更新 | E2E-LOGS-028 | 操作 | 正常系 | 高 | 削除後、リストから即座に削除 | 会話削除完了後 | 削除した会話がリストから消える、他の会話は残る | | | |
| 31 | E2E-LOGS-031 | 削除エラーの処理 | E2E-LOGS-024 | 削除 | 異常系 | 高 | 削除APIエラー時の表示 | モックAPIで削除エラーを発生 | エラーメッセージ「会話削除エラー」が表示、会話は残る | | | |
| 32 | E2E-LOGS-032 | 空の状態からの新規会話作成 | E2E-LOGS-007 | 遷移 | 正常系 | 高 | 新規会話ボタンで/chatへ遷移 | 「新しい会話を開始」ボタンをクリック | /chat へ遷移 | | | |
| 33 | E2E-LOGS-033 | プレビューテキストの生成 | E2E-LOGS-005 | 表示 | 正常系 | 低 | プレビューテキストが表示される | 会話カードを確認 | 「[タイトル]についての会話です。詳細を確認してください...」と表示 | | | |
| 34 | E2E-LOGS-034 | プレビューテキストの省略表示 | E2E-LOGS-033 | 表示 | 正常系 | 低 | 長文プレビューは2行で省略 | 長いプレビューテキスト | 2行まで表示、それ以降は「...」で省略 | | | |
| 35 | E2E-LOGS-035 | メッセージ数の表示 | E2E-LOGS-005 | 表示 | 正常系 | 中 | メッセージ数が正確に表示 | session-001（8メッセージ） | 「8メッセージ」と表示、ChatBubbleOutlineIconと共に表示 | | | |
| 36 | E2E-LOGS-036 | メッセージ数0件の表示 | E2E-LOGS-005 | 表示 | 正常系 | 低 | メッセージ0件の場合の表示 | 新規作成直後の会話 | 「0メッセージ」と表示 | | | |
| 37 | E2E-LOGS-037 | タイトル未設定の会話 | E2E-LOGS-005 | 表示 | 正常系 | 中 | タイトルがnullの場合のフォールバック | モックデータ: title = null | 「無題の会話」と表示 | | | |
| 38 | E2E-LOGS-038 | 長いタイトルの省略表示 | E2E-LOGS-005 | 表示 | 正常系 | 中 | 長いタイトルの省略 | タイトル: 「これは非常に長いタイトルでカード幅を超える可能性があります」 | overflow: hidden、textOverflow: ellipsis、whiteSpace: nowrap で省略表示 | | | |
| 39 | E2E-LOGS-039 | ページタイトルの表示 | E2E-LOGS-001 | 表示 | 正常系 | 低 | ページ上部のタイトル表示 | ページアクセス時 | 「会話履歴」が h4、fontWeight: 700、color: primary.main で表示 | | | |
| 40 | E2E-LOGS-040 | MainLayoutの適用 | E2E-LOGS-001 | レイアウト | 正常系 | 中 | MainLayoutコンポーネントが適用 | ページ全体を確認 | ヘッダー、ボトムナビゲーション、コンテンツエリアが表示 | | | |
| 41 | E2E-LOGS-041 | レスポンシブ：デスクトップ表示 | E2E-LOGS-005 | レスポンシブ | 正常系 | 高 | デスクトップでの表示確認 | 画面幅: 1920px | maxWidth: 1200px、mx: auto でコンテンツが中央配置 | | | |
| 42 | E2E-LOGS-042 | レスポンシブ：タブレット表示 | E2E-LOGS-005 | レスポンシブ | 正常系 | 高 | タブレットでの表示確認 | 画面幅: 768px | レイアウトが適切に調整される、会話カードが画面幅に収まる | | | |
| 43 | E2E-LOGS-043 | レスポンシブ：モバイル表示（iPhone） | E2E-LOGS-005 | レスポンシブ | 高 | スマホ対応必須 | iPhone Safari での表示確認 | iPhone 12以降、画面幅: 375px | 会話カードが縦に並ぶ、タイトル・プレビューが適切に省略、タップ可能な領域確保 | | | |
| 44 | E2E-LOGS-044 | レスポンシブ：モバイル表示（Android） | E2E-LOGS-005 | レスポンシブ | 高 | スマホ対応必須 | Android Chrome での表示確認 | Pixel 5以降、画面幅: 375px | 会話カードが縦に並ぶ、タイトル・プレビューが適切に省略、タップ可能な領域確保 | | | |
| 45 | E2E-LOGS-045 | タッチ操作：会話カードタップ | E2E-LOGS-043 | タッチ操作 | 正常系 | 高 | モバイルでのタップ動作 | 会話カードをタップ | /chat?session_id=XXX へ遷移、タップフィードバックあり | | | |
| 46 | E2E-LOGS-046 | タッチ操作：削除ボタンタップ | E2E-LOGS-043 | タッチ操作 | 正常系 | 高 | モバイルでの削除ボタンタップ | 削除アイコンをタップ | モーダルが表示、会話詳細へ遷移しない | | | |
| 47 | E2E-LOGS-047 | スクロール動作（会話多数） | E2E-LOGS-005 | UI/UX | 正常系 | 中 | 会話が多数ある場合のスクロール | モックデータ: 30件の会話 | スムーズにスクロール、パフォーマンス低下なし | | | |
| 48 | E2E-LOGS-048 | 空の状態アイコンの表示 | E2E-LOGS-007 | 表示 | 正常系 | 低 | 空の状態のアイコン | 会話0件の状態 | ChatBubbleOutlineIcon、fontSize: 80、color: text.disabled が表示 | | | |
| 49 | E2E-LOGS-049 | API応答時間の測定 | E2E-LOGS-005 | パフォーマンス | 正常系 | 中 | 会話一覧取得の応答時間 | API呼び出し〜表示完了 | 500ms以内に表示完了（モックAPI遅延） | | | |
| 50 | E2E-LOGS-050 | 複数ユーザーのデータ分離 | E2E-LOGS-001 | セキュリティ | セキュリティ | 高 | ユーザーIDでのフィルタリング | client1@rag-base.local でログイン | client-001のuser_idを持つ会話のみ表示 | | | |
| 51 | E2E-LOGS-051 | 他ユーザーの会話は非表示 | E2E-LOGS-050 | セキュリティ | セキュリティ | 高 | 他ユーザーの会話が表示されない | client1@rag-base.local でログイン、client2の会話がDBに存在 | client2の会話は表示されない | | | |
| 52 | E2E-LOGS-052 | XSS対策：タイトル | E2E-LOGS-005 | セキュリティ | セキュリティ | 高 | タイトルにスクリプトタグが含まれる場合 | title: "<script>alert('XSS')</script>" | スクリプトが実行されず、エスケープされたテキストとして表示 | | | |
| 53 | E2E-LOGS-053 | XSS対策：プレビューテキスト | E2E-LOGS-005 | セキュリティ | セキュリティ | 中 | プレビューにスクリプトタグが含まれる場合 | preview: "<img src=x onerror=alert('XSS')>" | スクリプトが実行されず、エスケープされたテキストとして表示 | | | |
| 54 | E2E-LOGS-054 | エッジケース：同時刻の複数会話 | E2E-LOGS-005 | エッジケース | 異常系 | 低 | 全く同じ時刻に複数の会話 | 3つの会話が同一時刻 | 正常に3つとも表示、順序は保証されない | | | |
| 55 | E2E-LOGS-055 | エッジケース：日付境界（0時） | E2E-LOGS-008 | エッジケース | 異常系 | 低 | 日付が変わる瞬間の会話 | 23:59の会話と0:00の会話 | 正しい日付グループに分類される | | | |
| 56 | E2E-LOGS-056 | エッジケース：未来の日付 | E2E-LOGS-005 | エッジケース | 異常系 | 低 | created_atが未来の日付 | 明日の日付の会話 | 「今日」グループに表示される（または適切な処理） | | | |
| 57 | E2E-LOGS-057 | エッジケース：非常に古い会話 | E2E-LOGS-011 | エッジケース | 異常系 | 低 | 1年前の会話 | 365日前の会話 | 「それ以前」グループに正常に表示 | | | |
| 58 | E2E-LOGS-058 | ネットワークエラー後の再読み込み | E2E-LOGS-006 | 操作 | 異常系 | 中 | エラー後に手動で再読み込み | エラー発生後、ページをリロード | 再度API呼び出し、正常なら会話表示 | | | |
| 59 | E2E-LOGS-059 | 削除後の空の状態への遷移 | E2E-LOGS-028 | 操作 | 正常系 | 中 | 最後の会話を削除した場合 | 会話が1件のみの状態で削除実行 | 空の状態UI（「会話履歴がありません」）が表示 | | | |
| 60 | E2E-LOGS-060 | 会話詳細からの戻り動作 | E2E-LOGS-021 | ワークフロー | 正常系 | 中 | /chatから/logsに戻る | /chat?session_id=session-001 から戻るボタン | /logsに戻る、会話リストが再表示される | | | |
| 61 | E2E-LOGS-061 | グループのソート順 | E2E-LOGS-005 | 表示 | 正常系 | 低 | 日付グループの表示順序 | 全グループに会話がある状態 | 「今日」→「昨日」→「今週」→「それ以前」の順で表示 | | | |
| 62 | E2E-LOGS-062 | グループ内のソート順 | E2E-LOGS-005 | 表示 | 正常系 | 中 | 各グループ内での会話のソート | 同じグループに複数会話 | updated_at の降順（最新が上） | | | |

## テスト分類別カバレッジ
- **正常系**: 42項目
- **異常系**: 8項目
- **セキュリティ**: 6項目
- **レスポンシブ**: 4項目
- **タッチ操作**: 2項目

## API呼び出し一覧
| No | メソッド | エンドポイント | 用途 | テストID |
|----|---------|--------------|------|----------|
| 1 | GET | `/v1/conversations?user_id={userId}` | 会話一覧取得 | E2E-LOGS-005, E2E-LOGS-006, E2E-LOGS-007 |
| 2 | DELETE | `/v1/conversations/{sessionId}` | 会話削除 | E2E-LOGS-028, E2E-LOGS-031 |

## 優先度別実施順序

### 高優先度（必須）: 25項目
基本機能、認証、セキュリティ、スマホ対応

1. **認証・アクセス制御**: E2E-LOGS-001, E2E-LOGS-002, E2E-LOGS-003
2. **データ取得**: E2E-LOGS-004, E2E-LOGS-005, E2E-LOGS-006, E2E-LOGS-007
3. **基本表示**: E2E-LOGS-008, E2E-LOGS-012
4. **会話操作**: E2E-LOGS-021, E2E-LOGS-022, E2E-LOGS-024, E2E-LOGS-026, E2E-LOGS-028, E2E-LOGS-030, E2E-LOGS-031, E2E-LOGS-032
5. **レスポンシブ（必須）**: E2E-LOGS-041, E2E-LOGS-042, E2E-LOGS-043, E2E-LOGS-044
6. **タッチ操作**: E2E-LOGS-045, E2E-LOGS-046
7. **セキュリティ**: E2E-LOGS-050, E2E-LOGS-051, E2E-LOGS-052

### 中優先度（推奨）: 24項目
UI/UX品質、パフォーマンス、エラー処理

1. **日付グループ**: E2E-LOGS-009, E2E-LOGS-010, E2E-LOGS-011
2. **時刻フォーマット**: E2E-LOGS-016, E2E-LOGS-017, E2E-LOGS-018, E2E-LOGS-019
3. **操作詳細**: E2E-LOGS-025, E2E-LOGS-027, E2E-LOGS-029
4. **表示詳細**: E2E-LOGS-035, E2E-LOGS-037, E2E-LOGS-038, E2E-LOGS-040
5. **スクロール・パフォーマンス**: E2E-LOGS-047, E2E-LOGS-049
6. **セキュリティ追加**: E2E-LOGS-053
7. **エラー処理**: E2E-LOGS-058
8. **ワークフロー**: E2E-LOGS-059, E2E-LOGS-060, E2E-LOGS-062

### 低優先度（任意）: 13項目
細かなUI詳細、エッジケース

1. **アイコン選択**: E2E-LOGS-013, E2E-LOGS-014, E2E-LOGS-015
2. **UI詳細**: E2E-LOGS-020, E2E-LOGS-023, E2E-LOGS-033, E2E-LOGS-034, E2E-LOGS-036, E2E-LOGS-039, E2E-LOGS-048, E2E-LOGS-061
3. **エッジケース**: E2E-LOGS-054, E2E-LOGS-055, E2E-LOGS-056, E2E-LOGS-057

## 前提条件

### テストアカウント
```yaml
クライアント1:
  email: client1@rag-base.local
  password: TestClient2025!
  user_id: client-001
  role: クライアント

クライアント2:
  email: client2@rag-base.local
  password: TestClient2025!
  user_id: client-002
  role: クライアント

コーチ:
  email: coach@rag-base.local
  password: TestCoach2025!
  user_id: coach-001
  role: コーチ
```

### テストデータ（モック）
```typescript
// 4件の会話データ
{
  session_id: 'session-001',
  user_id: 'client-001',
  title: '今週の目標について',
  created_at: new Date().toISOString(),  // 今日
  updated_at: new Date().toISOString(),
  message_count: 8,
}
{
  session_id: 'session-002',
  user_id: 'client-001',
  title: 'キャリアの方向性',
  created_at: new Date(Date.now() - 86400000).toISOString(),  // 昨日
  updated_at: new Date(Date.now() - 86400000).toISOString(),
  message_count: 5,
}
{
  session_id: 'session-003',
  user_id: 'client-001',
  title: 'ワークライフバランス',
  created_at: new Date(Date.now() - 86400000 - 21600000).toISOString(),  // 昨日
  updated_at: new Date(Date.now() - 86400000 - 21600000).toISOString(),
  message_count: 12,
}
{
  session_id: 'session-004',
  user_id: 'client-001',
  title: 'チーム管理のコツ',
  created_at: new Date(Date.now() - 259200000).toISOString(),  // 3日前
  updated_at: new Date(Date.now() - 259200000).toISOString(),
  message_count: 6,
}
```

### テスト環境
- **ブラウザ**: Chrome 最新版、Safari 最新版（iOS）、Chrome 最新版（Android）
- **画面サイズ**:
  - デスクトップ: 1920 × 1080
  - タブレット: 768 × 1024
  - モバイル（iPhone）: 375 × 667
  - モバイル（Android）: 375 × 667

## 特記事項

### スマホ対応必須項目
ConversationHistoryPageはクライアント向けページのため、スマホ対応が必須です。

#### 必須テスト
1. **E2E-LOGS-043**: iPhone Safari での表示・操作確認
2. **E2E-LOGS-044**: Android Chrome での表示・操作確認
3. **E2E-LOGS-045**: タップによる会話詳細遷移
4. **E2E-LOGS-046**: タップによる削除モーダル表示

#### 確認事項
- タップ領域が十分な大きさ（44px × 44px以上推奨）
- 削除ボタンとカード全体のタップが正しく分離
- モーダルがモバイル画面に収まる
- スクロールがスムーズ

### モックAPIの挙動
```typescript
// @MOCK_TO_API マーク付きの関数

// 1. mockGetConversations
// GET /v1/conversations?user_id={userId}
// 遅延: 500ms
// フィルタリング: user_idで会話をフィルタ

// 2. mockDeleteConversation
// DELETE /v1/conversations/{sessionId}
// 遅延: 300ms
// 処理: MOCK_CONVERSATIONS配列とMESSAGE_STOREから削除
```

### 日付グルーピングロジック
```typescript
groupConversationsByDate(conversations: Conversation[]): Record<string, Conversation[]>

グループ分類:
- 今日: convDate === today
- 昨日: convDate === yesterday
- 今週: convDate >= weekAgo (7日前)
- それ以前: 上記以外
```

### アイコンマッピングロジック
```typescript
getIconFromTitle(title: string)

パターンマッチング:
- '目標' or '設定' → PsychologyIcon
- '学習' or '理論' or 'コーチング' → SchoolIcon
- 'キャリア' or '計画' → AssignmentIcon
- 'モチベーション' or 'サポート' → SupportAgentIcon
- default → PsychologyIcon
```

### 時刻フォーマットロジック
```typescript
formatTime(isoString: string): string

フォーマット:
- 今日: "HH:MM" (例: "14:30")
- 昨日: "HH:MM" (例: "9:15")
- 今週: "曜日 HH:MM" (例: "水曜日 16:00")
- それ以前: "M/D" (例: "10/15")
```

## テスト実施ガイドライン

### テスト実施順序の推奨
1. **Phase 1: 基本機能（高優先度の依存なし）**
   - E2E-LOGS-001, E2E-LOGS-002, E2E-LOGS-003
   - E2E-LOGS-004

2. **Phase 2: データ取得・表示（高優先度）**
   - E2E-LOGS-005, E2E-LOGS-006, E2E-LOGS-007
   - E2E-LOGS-008, E2E-LOGS-012

3. **Phase 3: 操作（高優先度）**
   - E2E-LOGS-021, E2E-LOGS-022, E2E-LOGS-024
   - E2E-LOGS-026, E2E-LOGS-028, E2E-LOGS-030

4. **Phase 4: レスポンシブ・タッチ操作（高優先度）**
   - E2E-LOGS-041〜E2E-LOGS-046

5. **Phase 5: セキュリティ（高優先度）**
   - E2E-LOGS-050, E2E-LOGS-051, E2E-LOGS-052

6. **Phase 6: 中優先度項目**
   - 日付・時刻フォーマット、UI詳細、エラー処理

7. **Phase 7: 低優先度項目**
   - アイコン、エッジケース

### 失敗時の対応
- **依存テストが失敗**: 依存先のテストを先に修正
- **モバイルテストが失敗**: デスクトップで動作確認してから原因調査
- **削除テストが失敗**: モックデータが正しくリセットされているか確認

### 自動テスト化の推奨
以下のテストはPlaywrightでの自動化を推奨:
- E2E-LOGS-001〜E2E-LOGS-007 (基本フロー)
- E2E-LOGS-021, E2E-LOGS-024, E2E-LOGS-028 (主要操作)
- E2E-LOGS-043, E2E-LOGS-044 (モバイル対応)

---

**最終更新**: 2025-11-02
**総テスト項目数**: 62
**次回更新**: テスト実施後、結果を反映
