# ChatPage（D-002）E2Eテスト仕様書

生成日: 2025-11-02
対象ページ: /chat
テスト環境: モック実装
作成者: E2Eテスト仕様書作成エージェント

## 概要
- 総テスト項目数: 68
- 高優先度: 32項目
- 中優先度: 24項目
- 低優先度: 12項目

## テスト項目一覧

| No | テストID | テスト項目 | 依存テストID | 機能分類 | テスト分類 | 優先度 | 確認内容 | テストデータ/手順 | 期待結果 | 実施日 | 結果 | 備考 |
|----|---------|----------|------------|---------|-----------|--------|---------|------------------|----------|--------|------|------|
| 1 | E2E-CHAT-001 | ページアクセス（認証済み） | なし | 初期表示 | 正常系 | 高 | ログイン後のチャットページアクセス | 1. ログイン完了<br>2. `/chat`にアクセス | ・ヘッダー表示（COM:PASSロゴ、新規会話ボタン、履歴ボタン）<br>・モードセレクター表示（4モード）<br>・ウェルカムメッセージ表示<br>・クイックプロンプト4件表示<br>・入力エリア表示<br>・ボトムナビゲーション表示（5項目） | | | |
| 2 | E2E-CHAT-002 | ページアクセス（未認証） | なし | 認証 | セキュリティ | 高 | 未ログイン時のアクセス制御 | 1. ログアウト状態<br>2. `/chat`に直接アクセス | ・ログインページにリダイレクト<br>・エラーメッセージ表示（要ログイン） | | | |
| 3 | E2E-CHAT-003 | 初期表示：課題解決モード | E2E-CHAT-001 | 初期表示 | 正常系 | 高 | デフォルトモードの表示 | 1. チャットページアクセス<br>2. モード未選択状態を確認 | ・「課題解決モード」が選択状態<br>・ウェルカムタイトル「課題解決モード」<br>・ウェルカムメッセージ表示<br>・クイックプロンプト4件表示<br>　- 問題を特定する<br>　- 原因を分析する<br>　- 解決策を考える<br>　- アクションプランを立てる | | | |
| 4 | E2E-CHAT-004 | 会話履歴の自動読み込み | E2E-CHAT-001 | データ取得 | 正常系 | 高 | 初期会話履歴の取得 | 1. チャットページアクセス<br>2. ネットワークタブでAPIリクエスト確認 | ・`GET /v1/conversations?user_id={userId}`が実行される<br>・会話履歴が内部的に読み込まれる（履歴ドロワーに表示準備完了） | | | |
| 5 | E2E-CHAT-005 | モード切り替え：学習支援モード | E2E-CHAT-003 | モード切替 | 正常系 | 高 | 学習支援モードへの切り替え | 1. 初期表示後<br>2. 「学習支援モード」ボタンをクリック | ・「学習支援モード」が選択状態<br>・ウェルカムタイトル「学習支援モード」<br>・ウェルカムメッセージ変更<br>・クイックプロンプト変更（COMPASS教材、コーチング理論、スキル向上、学習計画） | | | |
| 6 | E2E-CHAT-006 | モード切り替え：計画立案モード | E2E-CHAT-003 | モード切替 | 正常系 | 高 | 計画立案モードへの切り替え | 1. 初期表示後<br>2. 「計画立案モード」ボタンをクリック | ・「計画立案モード」が選択状態<br>・ウェルカムタイトル「計画立案モード」<br>・ウェルカムメッセージ変更<br>・クイックプロンプト変更（目標設定、週次計画、タスク整理、優先順位） | | | |
| 7 | E2E-CHAT-007 | モード切り替え：伴走補助モード | E2E-CHAT-003 | モード切替 | 正常系 | 高 | 伴走補助モードへの切り替え | 1. 初期表示後<br>2. 「伴走補助モード」ボタンをクリック | ・「伴走補助モード」が選択状態<br>・ウェルカムタイトル「伴走補助モード」<br>・ウェルカムメッセージ変更<br>・クイックプロンプト変更（進捗振り返り、モチベーション向上、成果確認、次のステップ） | | | |
| 8 | E2E-CHAT-008 | クイックプロンプト選択 | E2E-CHAT-003 | 入力補助 | 正常系 | 高 | クイックプロンプトクリック時の挙動 | 1. 初期表示後<br>2. 「問題を特定する」クイックプロンプトをクリック | ・入力欄に「今抱えている問題を整理したいです」が自動入力される<br>・ウェルカム画面は表示されたまま<br>・送信ボタンが有効化される | | | |
| 9 | E2E-CHAT-009 | メッセージ送信（新規会話） | E2E-CHAT-008 | 作成 | 正常系 | 高 | 初回メッセージ送信 | 1. クイックプロンプト選択後<br>2. 送信ボタンをクリック | ・ユーザーメッセージがチャット履歴に表示される<br>・タイピングインジケーター表示（3つのドット + 「AIが入力中...」）<br>・3-5秒後にAI応答が表示される<br>・新規セッションIDが生成される<br>・ウェルカム画面が非表示になる | | | |
| 10 | E2E-CHAT-010 | AI応答の表示（引用あり） | E2E-CHAT-009 | 参照 | 正常系 | 高 | AI応答メッセージの表示形式 | 1. メッセージ送信後<br>2. AI応答を確認 | ・メッセージバブル（左寄せ、白背景、角丸）<br>・AI応答内容表示<br>・引用元セクション表示（灰色背景、左青線）<br>・引用元アイコン表示（システムRAG: 本、ユーザーRAG: 人）<br>・引用元名（例: コーチング理論体系.pdf）<br>・タイムスタンプ表示（例: 15:30） | | | |
| 11 | E2E-CHAT-011 | メッセージ送信（継続会話） | E2E-CHAT-009 | 作成 | 正常系 | 高 | 2件目以降のメッセージ送信 | 1. 1件目のメッセージ送信済み<br>2. 入力欄に「もっと詳しく教えてください」と入力<br>3. 送信ボタンをクリック | ・同じセッションIDで送信される<br>・ユーザーメッセージ表示<br>・AI応答表示<br>・会話履歴が時系列順に並ぶ | | | |
| 12 | E2E-CHAT-012 | メッセージ入力（Enterキー送信） | E2E-CHAT-001 | 入力 | 正常系 | 高 | Enterキーでのメッセージ送信 | 1. 入力欄に「テストメッセージ」と入力<br>2. Enterキーを押す | ・メッセージが送信される<br>・ユーザーメッセージ表示<br>・タイピングインジケーター表示 | | | |
| 13 | E2E-CHAT-013 | メッセージ入力（Shift+Enter改行） | E2E-CHAT-001 | 入力 | 正常系 | 中 | Shift+Enterでの改行入力 | 1. 入力欄に「1行目」と入力<br>2. Shift+Enterを押す<br>3. 「2行目」と入力 | ・改行が挿入される<br>・メッセージは送信されない<br>・入力欄に2行表示される | | | |
| 14 | E2E-CHAT-014 | メッセージ送信制御（空メッセージ） | E2E-CHAT-001 | バリデーション | 異常系 | 高 | 空メッセージの送信防止 | 1. 入力欄が空の状態<br>2. 送信ボタンをクリック | ・送信ボタンが無効化されている<br>・メッセージは送信されない | | | |
| 15 | E2E-CHAT-015 | メッセージ送信制御（空白のみ） | E2E-CHAT-001 | バリデーション | 異常系 | 高 | 空白文字のみの送信防止 | 1. 入力欄に「   」（空白のみ）を入力<br>2. 送信ボタンをクリック | ・送信ボタンが無効化されている<br>・メッセージは送信されない | | | |
| 16 | E2E-CHAT-016 | タイピング中の送信制御 | E2E-CHAT-009 | バリデーション | 異常系 | 高 | AI応答中の重複送信防止 | 1. メッセージ送信後<br>2. タイピングインジケーター表示中に入力欄に文字を入力<br>3. 送信ボタンをクリック | ・送信ボタンが無効化されている<br>・入力欄が無効化されている<br>・メッセージは送信されない | | | |
| 17 | E2E-CHAT-017 | 自動スクロール（新メッセージ） | E2E-CHAT-011 | UI動作 | 正常系 | 中 | 新メッセージ追加時の自動スクロール | 1. 複数メッセージ送信済み（スクロール可能な状態）<br>2. 新しいメッセージを送信 | ・チャット履歴が自動的に最下部までスクロールされる<br>・最新メッセージが表示領域に入る | | | |
| 18 | E2E-CHAT-018 | 新規会話作成ボタン（メッセージなし） | E2E-CHAT-001 | 作成 | 正常系 | 中 | 初期状態での新規会話作成 | 1. 初期表示後（メッセージ0件）<br>2. ヘッダーの「+」ボタンをクリック | ・確認ダイアログは表示されない<br>・新しいセッションIDが生成される<br>・ウェルカム画面が表示される | | | |
| 19 | E2E-CHAT-019 | 新規会話作成ボタン（メッセージあり・確認OK） | E2E-CHAT-009 | 作成 | 正常系 | 高 | 会話中の新規会話作成（ユーザーが承諾） | 1. メッセージ送信済み（1件以上）<br>2. ヘッダーの「+」ボタンをクリック<br>3. 確認ダイアログで「OK」をクリック | ・確認ダイアログ表示（「新しい会話を開始しますか？現在の会話は保存されます。」）<br>・新しいセッションIDが生成される<br>・メッセージ履歴がクリアされる<br>・ウェルカム画面が表示される<br>・会話履歴に前の会話が保存される | | | |
| 20 | E2E-CHAT-020 | 新規会話作成ボタン（メッセージあり・確認キャンセル） | E2E-CHAT-009 | 作成 | 正常系 | 中 | 会話中の新規会話作成（ユーザーがキャンセル） | 1. メッセージ送信済み（1件以上）<br>2. ヘッダーの「+」ボタンをクリック<br>3. 確認ダイアログで「キャンセル」をクリック | ・確認ダイアログが閉じる<br>・現在の会話が継続される<br>・メッセージ履歴が保持される | | | |
| 21 | E2E-CHAT-021 | 会話履歴ドロワー開く | E2E-CHAT-001 | 参照 | 正常系 | 高 | 会話履歴サイドバーの表示 | 1. チャットページ表示<br>2. ヘッダーの「履歴」ボタンをクリック | ・右側から会話履歴ドロワーがスライド表示される<br>・ドロワーヘッダー「会話履歴」表示<br>・閉じるボタン（×）表示<br>・会話リストが日付グループ別に表示される<br>　- 今日<br>　- 昨日<br>　- 今週<br>　- それ以前 | | | |
| 22 | E2E-CHAT-022 | 会話履歴ドロワー閉じる | E2E-CHAT-021 | 参照 | 正常系 | 中 | 会話履歴サイドバーの非表示 | 1. 会話履歴ドロワー表示中<br>2. 閉じるボタン（×）をクリック | ・ドロワーが右側にスライドアウトして非表示になる<br>・チャット画面に戻る | | | |
| 23 | E2E-CHAT-023 | 会話履歴の日付グループ表示 | E2E-CHAT-021 | 参照 | 正常系 | 中 | 会話の日付別グループ化 | 1. 会話履歴ドロワーを開く<br>2. 各グループの表示を確認 | ・「今日」グループ: 本日の会話が表示される<br>・「昨日」グループ: 昨日の会話が表示される<br>・「今週」グループ: 2-7日前の会話が表示される<br>・「それ以前」グループ: 8日以前の会話が表示される<br>・各グループ内は更新日時の新しい順 | | | |
| 24 | E2E-CHAT-024 | 過去会話の読み込み | E2E-CHAT-021 | 参照 | 正常系 | 高 | 会話履歴からの会話読み込み | 1. 会話履歴ドロワーを開く<br>2. 任意の会話をクリック | ・選択した会話のメッセージが読み込まれる<br>・チャット履歴エリアにメッセージが時系列順に表示される<br>・セッションIDが切り替わる<br>・ドロワーが自動的に閉じる<br>・選択した会話が青背景でハイライト表示される | | | |
| 25 | E2E-CHAT-025 | 会話履歴のアクティブ表示 | E2E-CHAT-024 | 参照 | 正常系 | 中 | 現在の会話のハイライト表示 | 1. 会話履歴から会話を読み込み<br>2. 会話履歴ドロワーを再度開く | ・現在の会話が青背景でハイライト表示される<br>・左側に青い縦線が表示される | | | |
| 26 | E2E-CHAT-026 | ボトムナビゲーション表示 | E2E-CHAT-001 | 初期表示 | 正常系 | 高 | ボトムナビゲーションの表示 | 1. チャットページ表示<br>2. 画面下部のナビゲーションを確認 | ・5つのナビゲーション項目が表示される<br>　- ホーム<br>　- 計画/実行<br>　- 確認/改善<br>　- 学習（デフォルト選択状態）<br>　- ログ<br>・各項目にアイコンとラベル表示<br>・選択中の項目は青色表示 | | | |
| 27 | E2E-CHAT-027 | ボトムナビゲーション切り替え | E2E-CHAT-026 | ナビゲーション | 正常系 | 中 | ナビゲーション項目の切り替え | 1. ボトムナビゲーション表示<br>2. 「計画/実行」をタップ | ・「計画/実行」が選択状態になる（青色表示）<br>・他の項目は非選択状態（グレー表示）<br>・アイコンと文字色が変化する | | | |
| 28 | E2E-CHAT-028 | メッセージバブルのスタイル（ユーザー） | E2E-CHAT-009 | UI表示 | 正常系 | 低 | ユーザーメッセージの表示スタイル | 1. メッセージ送信後<br>2. ユーザーメッセージのスタイルを確認 | ・右寄せ配置<br>・青色背景<br>・白色テキスト<br>・角丸（右下のみ角が尖る）<br>・タイムスタンプは右寄せ、グレー | | | |
| 29 | E2E-CHAT-029 | メッセージバブルのスタイル（AI） | E2E-CHAT-010 | UI表示 | 正常系 | 低 | AI応答メッセージの表示スタイル | 1. AI応答受信後<br>2. AIメッセージのスタイルを確認 | ・左寄せ配置<br>・白色背景<br>・黒色テキスト<br>・角丸（左下のみ角が尖る）<br>・タイムスタンプは左寄せ、グレー | | | |
| 30 | E2E-CHAT-030 | 引用元の表示形式（システムRAG） | E2E-CHAT-010 | UI表示 | 正常系 | 中 | システムRAG引用の表示 | 1. 「目標」に関するメッセージを送信<br>2. AI応答の引用元を確認 | ・引用元セクション表示（灰色背景、左青線）<br>・「引用元」ラベル表示（アイコン付き）<br>・本アイコン表示（システムRAG）<br>・引用元名表示（例: コーチング理論体系.pdf）<br>・Chip形式で表示 | | | |
| 31 | E2E-CHAT-031 | 引用元の表示形式（ユーザーRAG） | E2E-CHAT-010 | UI表示 | 正常系 | 中 | ユーザーRAG引用の表示 | 1. 「目標」に関するメッセージを送信<br>2. AI応答の引用元でユーザーRAGを確認 | ・引用元セクション表示<br>・人物アイコン表示（ユーザーRAG）<br>・引用元名表示（例: あなたの過去の目標設定記録）<br>・Chip形式で表示 | | | |
| 32 | E2E-CHAT-032 | 長文メッセージの表示 | E2E-CHAT-009 | UI表示 | 正常系 | 中 | 長文メッセージの折り返し表示 | 1. 500文字以上の長文を入力して送信<br>2. AI応答を確認 | ・メッセージが適切に折り返される<br>・横スクロールは発生しない<br>・メッセージバブルは最大幅75%<br>・改行が保持される | | | |
| 33 | E2E-CHAT-033 | タイムスタンプのフォーマット | E2E-CHAT-010 | UI表示 | 正常系 | 低 | タイムスタンプの表示形式 | 1. メッセージ送信後<br>2. タイムスタンプを確認 | ・時刻形式: HH:MM（例: 15:30）<br>・0埋め表示（例: 09:05）<br>・24時間形式 | | | |
| 34 | E2E-CHAT-034 | API接続エラー（メッセージ送信） | E2E-CHAT-001 | エラー処理 | 異常系 | 高 | メッセージ送信時のエラーハンドリング | 1. ネットワークを切断<br>2. メッセージを送信 | ・ユーザーメッセージは表示される<br>・タイピングインジケーター表示<br>・タイムアウト後、エラーメッセージ表示（AI応答バブル形式）<br>・エラー内容:「申し訳ございません。エラーが発生しました。もう一度お試しください。」<br>・入力欄が再度有効化される | | | |
| 35 | E2E-CHAT-035 | API接続エラー（会話履歴取得） | E2E-CHAT-001 | エラー処理 | 異常系 | 中 | 会話履歴取得時のエラーハンドリング | 1. ネットワークを切断<br>2. ページを再読み込み | ・チャットページは表示される<br>・会話履歴は空の状態<br>・コンソールにエラーログ出力<br>・ユーザーには通常通り操作可能 | | | |
| 36 | E2E-CHAT-036 | API接続エラー（過去会話読み込み） | E2E-CHAT-021 | エラー処理 | 異常系 | 中 | 過去会話読み込み時のエラーハンドリング | 1. 会話履歴ドロワーを開く<br>2. ネットワークを切断<br>3. 任意の会話をクリック | ・コンソールにエラーログ出力<br>・メッセージは読み込まれない<br>・ドロワーは開いたまま | | | |
| 37 | E2E-CHAT-037 | 複数セッションの管理 | E2E-CHAT-019 | データ管理 | 正常系 | 高 | 複数会話の作成と切り替え | 1. 会話1を作成してメッセージ送信<br>2. 新規会話を作成<br>3. 会話2でメッセージ送信<br>4. 会話履歴から会話1を読み込み | ・各会話が独立して管理される<br>・会話1のメッセージが正しく表示される<br>・会話2のメッセージは表示されない<br>・セッションIDが正しく切り替わる | | | |
| 38 | E2E-CHAT-038 | 会話タイトルの自動生成 | E2E-CHAT-009 | データ管理 | 正常系 | 中 | 新規会話のタイトル設定 | 1. 新規会話を作成<br>2. メッセージを送信<br>3. 会話履歴を開く | ・新しい会話が「新しい会話」というタイトルで表示される | | | |
| 39 | E2E-CHAT-039 | AIモード別のプロンプト動作 | E2E-CHAT-005 | 機能 | 正常系 | 低 | モード別のクイックプロンプト動作確認 | 1. 「学習支援モード」に切り替え<br>2. 「COMPASS教材について」クイックプロンプトをクリック<br>3. 送信 | ・入力欄に「COMPASS教材の効果的な学習方法を教えてください」が入力される<br>・送信後、AI応答が表示される | | | |
| 40 | E2E-CHAT-040 | レスポンシブ: デスクトップ表示 | E2E-CHAT-001 | レスポンシブ | レスポンシブ | 中 | デスクトップ画面での表示 | 1. ブラウザ幅を1920pxに設定<br>2. チャットページを表示 | ・最大幅600pxで中央寄せ表示<br>・左右に余白あり<br>・すべての要素が適切に表示される | | | |
| 41 | E2E-CHAT-041 | レスポンシブ: タブレット表示 | E2E-CHAT-001 | レスポンシブ | レスポンシブ | 高 | タブレット画面での表示 | 1. ブラウザ幅を768pxに設定<br>2. チャットページを表示 | ・画面幅いっぱいに表示<br>・会話履歴ドロワーが画面幅100%で表示<br>・すべての要素が適切に表示される | | | |
| 42 | E2E-CHAT-042 | レスポンシブ: モバイル表示（iPhone） | E2E-CHAT-001 | レスポンシブ | レスポンシブ | 高 | iPhone画面での表示 | 1. デバイスをiPhone 12にエミュレート（375x667px）<br>2. チャットページを表示 | ・画面幅いっぱいに表示<br>・ヘッダー、モードセレクター、入力エリア、ボトムナビが適切に表示<br>・タッチ操作可能な要素のサイズが十分（最小44px）<br>・横スクロールなし | | | |
| 43 | E2E-CHAT-043 | レスポンシブ: モバイル表示（Android） | E2E-CHAT-001 | レスポンシブ | レスポンシブ | 高 | Android画面での表示 | 1. デバイスをPixel 5にエミュレート（393x851px）<br>2. チャットページを表示 | ・画面幅いっぱいに表示<br>・すべての要素が適切に表示される<br>・タッチ操作可能な要素のサイズが十分<br>・横スクロールなし | | | |
| 44 | E2E-CHAT-044 | モバイル: モードセレクター横スクロール | E2E-CHAT-042 | レスポンシブ | レスポンシブ | 中 | モバイルでのモード選択スクロール | 1. モバイル表示（375px）<br>2. モードセレクターを左右にスワイプ | ・4つのモードボタンが横スクロール可能<br>・スムーズにスクロールする<br>・スクロールバー非表示 | | | |
| 45 | E2E-CHAT-045 | モバイル: クイックプロンプトグリッド | E2E-CHAT-042 | レスポンシブ | レスポンシブ | 中 | モバイルでのクイックプロンプト表示 | 1. モバイル表示（375px）<br>2. ウェルカム画面のクイックプロンプトを確認 | ・2×2グリッドで表示される<br>・各プロンプトが適切なサイズ<br>・タップ可能なサイズ（最小120px高さ） | | | |
| 46 | E2E-CHAT-046 | モバイル: 入力エリアの固定位置 | E2E-CHAT-042 | レスポンシブ | レスポンシブ | 高 | モバイルでの入力エリア表示 | 1. モバイル表示（375px）<br>2. メッセージを複数送信してスクロール<br>3. ページをスクロール | ・入力エリアが画面下部に固定表示される<br>・スクロールしても位置が変わらない<br>・ボトムナビの上に表示される | | | |
| 47 | E2E-CHAT-047 | モバイル: キーボード表示時のレイアウト | E2E-CHAT-042 | レスポンシブ | レスポンシブ | 高 | モバイルでキーボード表示時の挙動 | 1. モバイル表示（375px）<br>2. 入力欄をタップしてキーボード表示 | ・入力エリアがキーボード上部に表示される<br>・チャット履歴エリアが適切に縮小される<br>・最新メッセージが見える位置にスクロールされる | | | |
| 48 | E2E-CHAT-048 | モバイル: 会話履歴ドロワーの表示 | E2E-CHAT-042 | レスポンシブ | レスポンシブ | 中 | モバイルでの会話履歴表示 | 1. モバイル表示（375px）<br>2. 会話履歴ボタンをタップ | ・ドロワーが画面幅100%で表示される<br>・右からスライドインアニメーション<br>・閉じるボタンが右上に表示される<br>・会話リストが適切に表示される | | | |
| 49 | E2E-CHAT-049 | タッチ操作: タップフィードバック | E2E-CHAT-042 | レスポンシブ | レスポンシブ | 低 | タッチ時の視覚フィードバック | 1. モバイル表示（375px）<br>2. 各ボタンをタップ | ・タップ時にホバー効果が表示される<br>・クイックプロンプトがタップ時に反応する<br>・ボタンが押された感覚がある | | | |
| 50 | E2E-CHAT-050 | パフォーマンス: 初期ロード時間 | E2E-CHAT-001 | パフォーマンス | 正常系 | 低 | ページ初期ロード速度 | 1. ページロード時のパフォーマンスを測定 | ・ページが3秒以内に表示される<br>・First Contentful Paint < 1.5秒<br>・Time to Interactive < 3秒 | | | |
| 51 | E2E-CHAT-051 | パフォーマンス: メッセージ送信応答時間 | E2E-CHAT-009 | パフォーマンス | 正常系 | 高 | AI応答の待機時間 | 1. メッセージを送信<br>2. AI応答までの時間を測定 | ・AI応答が3-5秒以内に表示される<br>・タイピングインジケーターが即座に表示される | | | |
| 52 | E2E-CHAT-052 | パフォーマンス: 会話履歴読み込み時間 | E2E-CHAT-024 | パフォーマンス | 正常系 | 中 | 過去会話の読み込み速度 | 1. 会話履歴から会話を選択<br>2. メッセージ表示までの時間を測定 | ・メッセージが1秒以内に表示される<br>・ローディング表示なし（500ms遅延のみ） | | | |
| 53 | E2E-CHAT-053 | パフォーマンス: 長い会話のスクロール | E2E-CHAT-011 | パフォーマンス | 正常系 | 低 | 大量メッセージ時のスクロール性能 | 1. 50件以上のメッセージがある会話を読み込み<br>2. スクロール動作を確認 | ・スムーズにスクロールできる<br>・カクつきなし<br>・自動スクロールがスムーズ | | | |
| 54 | E2E-CHAT-054 | アクセシビリティ: キーボードナビゲーション | E2E-CHAT-001 | アクセシビリティ | 正常系 | 低 | キーボードのみでの操作 | 1. マウスを使用せずTabキーで移動<br>2. 各要素にフォーカス | ・Tabキーで入力欄→送信ボタン→新規会話ボタン→履歴ボタンの順に移動<br>・フォーカス表示が明確<br>・Enterキーでボタン実行可能 | | | |
| 55 | E2E-CHAT-055 | アクセシビリティ: スクリーンリーダー対応 | E2E-CHAT-001 | アクセシビリティ | 正常系 | 低 | スクリーンリーダーでの読み上げ | 1. スクリーンリーダー（VoiceOver/NVDA）を有効化<br>2. チャットページを操作 | ・各要素が適切に読み上げられる<br>・ボタンの役割が明確<br>・メッセージの送信者が識別可能 | | | |
| 56 | E2E-CHAT-056 | ワークフロー: 初回ユーザーの完全フロー | なし | ワークフロー | 正常系 | 高 | 初めてのユーザーが最初の会話を完了するまで | 1. ログイン<br>2. チャットページアクセス<br>3. クイックプロンプト選択<br>4. メッセージ送信<br>5. AI応答確認<br>6. 追加質問送信 | ・各ステップがスムーズに進む<br>・ウェルカム画面から会話画面への遷移が自然<br>・AI応答が適切に表示される<br>・2往復の会話が完了する | | | |
| 57 | E2E-CHAT-057 | ワークフロー: モード切り替えて新規会話 | E2E-CHAT-009 | ワークフロー | 正常系 | 中 | モード変更後の新規会話作成 | 1. 課題解決モードでメッセージ送信<br>2. 学習支援モードに切り替え<br>3. 新規会話作成<br>4. クイックプロンプト選択して送信 | ・モード切り替えが正常に動作<br>・新規会話が正しく作成される<br>・学習支援モードのクイックプロンプトが使用される | | | |
| 58 | E2E-CHAT-058 | ワークフロー: 複数会話の作成と切り替え | E2E-CHAT-037 | ワークフロー | 正常系 | 中 | 複数の会話を作成して切り替える | 1. 会話1作成（課題解決）<br>2. 会話2作成（学習支援）<br>3. 会話3作成（計画立案）<br>4. 会話履歴から会話1を読み込み<br>5. 会話2を読み込み | ・各会話が独立して管理される<br>・会話履歴に3件表示される<br>・切り替えがスムーズに行われる<br>・各会話のメッセージが正しく表示される | | | |
| 59 | E2E-CHAT-059 | ワークフロー: 長文会話のシナリオ | E2E-CHAT-011 | ワークフロー | 正常系 | 低 | 長い会話のやり取り | 1. 新規会話作成<br>2. 10往復以上の会話を行う | ・すべてのメッセージが時系列順に表示される<br>・スクロールが適切に動作する<br>・パフォーマンス低下なし<br>・セッションIDが一貫している | | | |
| 60 | E2E-CHAT-060 | セキュリティ: 他ユーザーのセッションアクセス | E2E-CHAT-001 | セキュリティ | セキュリティ | 高 | 他ユーザーの会話への不正アクセス防止 | 1. ユーザーAでログイン<br>2. 会話を作成（session-A）<br>3. ユーザーBでログイン<br>4. 会話履歴を確認 | ・ユーザーBの会話履歴にsession-Aは表示されない<br>・直接URLアクセスも拒否される（API側で制御） | | | |
| 61 | E2E-CHAT-061 | セキュリティ: XSS対策（メッセージ内） | E2E-CHAT-009 | セキュリティ | セキュリティ | 高 | メッセージ内のスクリプト実行防止 | 1. メッセージに`<script>alert('XSS')</script>`と入力<br>2. 送信<br>3. AI応答を確認 | ・スクリプトは実行されない<br>・`<script>`タグがエスケープされて表示される<br>・XSSアラートが表示されない | | | |
| 62 | E2E-CHAT-062 | セキュリティ: XSS対策（引用元） | E2E-CHAT-010 | セキュリティ | セキュリティ | 中 | 引用元情報のスクリプト実行防止 | 1. モックデータの引用元に`<img src=x onerror=alert('XSS')>`を含める<br>2. メッセージを送信してAI応答を確認 | ・スクリプトは実行されない<br>・引用元名がエスケープされて表示される | | | |
| 63 | E2E-CHAT-063 | エッジケース: 非常に長いメッセージ | E2E-CHAT-009 | エッジケース | 異常系 | 低 | 極端に長いメッセージの送信 | 1. 5000文字以上のメッセージを入力<br>2. 送信 | ・メッセージが送信される<br>・適切に折り返し表示される<br>・UI崩れなし<br>・スクロールが正常に動作 | | | |
| 64 | E2E-CHAT-064 | エッジケース: 特殊文字の入力 | E2E-CHAT-009 | エッジケース | 異常系 | 低 | 特殊文字や絵文字の送信 | 1. メッセージに絵文字、記号（！？＠＃＄％）を含めて送信 | ・特殊文字が正しく表示される<br>・絵文字が適切に表示される<br>・UI崩れなし | | | |
| 65 | E2E-CHAT-065 | エッジケース: 会話履歴0件 | E2E-CHAT-001 | エッジケース | 正常系 | 低 | 会話履歴がない新規ユーザー | 1. 新規ユーザーでログイン<br>2. 会話履歴を開く | ・会話履歴ドロワーが表示される<br>・「今日」「昨日」「今週」「それ以前」のグループが表示される<br>・すべてのグループが空 | | | |
| 66 | E2E-CHAT-066 | エッジケース: ネットワーク復帰後の再送信 | E2E-CHAT-034 | エッジケース | 正常系 | 中 | エラー後のネットワーク復帰と再送信 | 1. ネットワーク切断<br>2. メッセージ送信（エラー発生）<br>3. ネットワーク復帰<br>4. 同じメッセージを再送信 | ・再送信が正常に完了する<br>・AI応答が表示される<br>・エラーメッセージは残る（会話履歴として） | | | |
| 67 | E2E-CHAT-067 | エッジケース: 会話履歴の大量データ | E2E-CHAT-021 | エッジケース | 正常系 | 低 | 100件以上の会話履歴がある場合 | 1. 会話履歴が100件以上あるユーザーでログイン<br>2. 会話履歴ドロワーを開く | ・会話履歴が適切にグループ化される<br>・スクロールがスムーズに動作する<br>・パフォーマンス低下なし | | | |
| 68 | E2E-CHAT-068 | エッジケース: 同時複数タブでの操作 | E2E-CHAT-001 | エッジケース | 異常系 | 低 | 複数タブで同時にチャット操作 | 1. 同じアカウントで2つのタブを開く<br>2. タブAでメッセージ送信<br>3. タブBで会話履歴を確認 | ・タブAでメッセージが送信される<br>・タブBでは自動更新されない（手動リロードが必要）<br>・データの不整合は発生しない | | | |

## テスト分類別カバレッジ
- 正常系: 40項目
- 異常系: 11項目
- セキュリティ: 5項目
- レスポンシブ: 10項目
- ワークフロー: 5項目
- パフォーマンス: 4項目
- アクセシビリティ: 2項目
- エッジケース: 8項目

## API呼び出し一覧
| No | メソッド | エンドポイント | 用途 | 対応テストID |
|----|---------|--------------|------|-------------|
| 1 | POST | `/v1/chat-messages` | メッセージ送信 | E2E-CHAT-009, E2E-CHAT-011, E2E-CHAT-034 |
| 2 | GET | `/v1/conversations?user_id={userId}` | 会話一覧取得 | E2E-CHAT-004, E2E-CHAT-035 |
| 3 | GET | `/v1/conversations/{sessionId}/messages` | 会話詳細（メッセージ一覧）取得 | E2E-CHAT-024, E2E-CHAT-036 |
| 4 | POST | `/v1/conversations` | 新規会話作成 | E2E-CHAT-018, E2E-CHAT-019 |

## 優先度別実施順序

### 1. 高優先度（必須）: 32項目
E2E-CHAT-001, E2E-CHAT-002, E2E-CHAT-003, E2E-CHAT-004, E2E-CHAT-005, E2E-CHAT-006, E2E-CHAT-007, E2E-CHAT-008, E2E-CHAT-009, E2E-CHAT-010, E2E-CHAT-011, E2E-CHAT-012, E2E-CHAT-014, E2E-CHAT-015, E2E-CHAT-016, E2E-CHAT-019, E2E-CHAT-021, E2E-CHAT-024, E2E-CHAT-026, E2E-CHAT-034, E2E-CHAT-037, E2E-CHAT-041, E2E-CHAT-042, E2E-CHAT-043, E2E-CHAT-046, E2E-CHAT-047, E2E-CHAT-051, E2E-CHAT-056, E2E-CHAT-060, E2E-CHAT-061

### 2. 中優先度（推奨）: 24項目
E2E-CHAT-013, E2E-CHAT-017, E2E-CHAT-018, E2E-CHAT-020, E2E-CHAT-022, E2E-CHAT-023, E2E-CHAT-025, E2E-CHAT-027, E2E-CHAT-030, E2E-CHAT-031, E2E-CHAT-032, E2E-CHAT-035, E2E-CHAT-036, E2E-CHAT-038, E2E-CHAT-040, E2E-CHAT-044, E2E-CHAT-045, E2E-CHAT-048, E2E-CHAT-052, E2E-CHAT-057, E2E-CHAT-058, E2E-CHAT-062, E2E-CHAT-066

### 3. 低優先度（任意）: 12項目
E2E-CHAT-028, E2E-CHAT-029, E2E-CHAT-033, E2E-CHAT-039, E2E-CHAT-049, E2E-CHAT-050, E2E-CHAT-053, E2E-CHAT-054, E2E-CHAT-055, E2E-CHAT-059, E2E-CHAT-063, E2E-CHAT-064, E2E-CHAT-065, E2E-CHAT-067, E2E-CHAT-068

## 前提条件

### テストアカウント
- クライアント: client1@rag-base.local / TestClient2025!
- コーチ: coach@rag-base.local / TestCoach2025!

### テスト環境
- モックAPIサービス: `mockChatService.ts`使用
- ブラウザ: Chrome最新版、Safari最新版（iOS）、Chrome最新版（Android）
- デバイス:
  - デスクトップ: 1920x1080px
  - タブレット: 768x1024px
  - モバイル: iPhone 12（375x667px）、Pixel 5（393x851px）

### モックデータ
- 初期会話履歴: 4件（session-001 〜 session-004）
- AI応答パターン: 目標、振り返り、モチベーション、キャリア、デフォルト
- 応答遅延: 3-5秒（ランダム）

## テスト実施時の注意事項

### 1. モバイルテスト
- 実機テスト推奨（iPhone 12以降、Pixel 5以降）
- Safari（iOS）とChrome（Android）の両方で確認
- タッチ操作の挙動を重点的に確認

### 2. パフォーマンステスト
- Chrome DevToolsのPerformanceタブを使用
- Network throttling（Fast 3G）でテスト
- Lighthouse スコア目標: Performance 90以上

### 3. セキュリティテスト
- XSS対策は手動でスクリプト注入を試行
- 認証制御はIncognitoモードで確認
- APIレスポンスのヘッダー確認（CORS、CSP）

### 4. エラーハンドリングテスト
- Chrome DevToolsでネットワークをオフライン化
- APIモックでエラーレスポンスを返すように調整
- コンソールエラーログを確認

## 既知の制限事項（MVP段階）

### 1. 会話削除機能
- MVP段階では未実装
- 会話履歴は蓄積される
- 本番化時に実装予定

### 2. 会話タイトル編集
- MVP段階では固定タイトル「新しい会話」
- 本番化時に自動タイトル生成機能を追加予定

### 3. リアルタイム同期
- 複数タブでの自動同期なし
- 手動リロードが必要

### 4. オフライン対応
- オフライン時のキャッシュ機能なし
- ネットワーク必須

## テスト完了基準

### 全体完了基準
- 高優先度テスト: 100%成功（32/32）
- 中優先度テスト: 90%以上成功（22/24以上）
- 低優先度テスト: 80%以上成功（10/12以上）

### デバイス別完了基準
- デスクトップ: すべての高優先度テスト成功
- タブレット: レスポンシブテスト含む高優先度テスト成功
- モバイル（iPhone）: E2E-CHAT-042〜E2E-CHAT-048すべて成功
- モバイル（Android）: E2E-CHAT-043〜E2E-CHAT-048すべて成功

### パフォーマンス完了基準
- 初期ロード: 3秒以内
- AI応答: 5秒以内
- 会話履歴読み込み: 1秒以内
- Lighthouse Performance: 90以上

## 参考資料
- 要件定義書: `docs/requirements.md`
- API仕様書: `docs/api-specs/chat-page-api.md`
- 実装ファイル: `frontend/src/pages/ChatPage/index.tsx`
- モックサービス: `frontend/src/services/api/mockChatService.ts`
- 型定義: `frontend/src/types/index.ts`

---

**作成日**: 2025-11-02
**バージョン**: MVP v1.0
**次回更新予定**: テスト実施完了後
